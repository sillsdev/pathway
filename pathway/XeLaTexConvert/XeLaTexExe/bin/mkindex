#!/bin/sh
progname=`basename $0`
case $# in
0)	echo "usage: `basename $0` file[.idx] ..." 1>&2
	exit 1 ;;
esac

gind=gind.ist
gglo=gglo.ist

# remember starting directory
dir=$PWD

# loop over all files
for i
do
	destdir=`echo $i | sed 's/^[^\/]*$/./; s/\/[^\/]*$//'`
	test -d $destdir||continue
	cd $destdir
	FILENAME=`basename $i .idx`
	test -f $FILENAME.idx && makeindex -s $gind $FILENAME
	test -f $FILENAME.glo && makeindex -s $gglo -o $FILENAME.gls $FILENAME.glo
	cd $dir
done
